<html>
	<head>
		<script>
			function Hi(){
				var url = "/get_complaints";
				var obj = new XMLHttpRequest();
				obj.onreadystatechange = function(){
				if(obj.readyState == 4){
					var val = JSON.parse(obj.responseText);
				document.getElementById("complaints").innerHTML="Hi"+val[0].length;
					for(var i=0;i<val.length;i++){
					document.getElementById("complaints").innerHTML+="<tr><td>"+val[i][0]+"</td><td>"+val[i][1]+"</td><td>"+val[i][2]+"</td><td>"+val[i][3]+"</td><td>"+val[i][4]+"</td><td>"+"<form action='/reask' method='get'><button type='submit' value = '"+val[i][0]+"' id='c' name='c'>+</button></form></td><td>"+val[i][5]+"</td><td>"+val[i][6]+"</td></tr>";					}
				}
			}
				obj.open("GET",url, true);
				obj.send();
				}

				function search_ajax(){
					var url="/api/search"
					var obj = new XMLHttpRequest();
					obj.onreadystatechange = function(){
						if(obj.readyState == 4){
							var val = JSON.parse(obj.responseText);
							document.getElementById("complaints").innerHTML = "";
							for(var i = 0; i < val.length; i++){
								document.getElementById("complaints").innerHTML += "Hi " + val[i][0] + " ";
							}
						}
					}
					url = url+"?q="+document.getElementById("Query").value;
					obj.open("GET", url, true);
					obj.send();
				}
		</script>
	</head>
	<body onload="Hi()">
		<h1>
				Welcome
				<form method="post" action="/logout">
				<button style="margin-left:16cm;" >
					Log Out
				</button>
				</form>
				<button style="margin-left:2cm;" onclick="window.location.href='lodge_complaint.html'"> 
					Lodge a complaint 
				</button>
				<button style="margin-left:2cm;" onclick="window.location.href='lodge_complaint.html'">
					View Complaint History
				</button>
		</h1>
		<div>
			SEARCH: <input style="width:20cm;" type = "text" id = "Query" name="Query"/>
			<input type = "submit" id = "button1" value = "Go!" onclick="search_ajax()" />
		</div>
		<table style = "margin-top:2cm;" id = "complaints" name="complaints"> 
			<tr>
				<th>Complaint ID</th>
				<th>Department</th>
				<th>Subject</th>
				<th>Text</th>
				<th>Time</th>
				<th>ReAsk</th>
				<th>Status</th>
				<th>Resolve Update</th>
			</tr>
		</table>
	</body>
</html>